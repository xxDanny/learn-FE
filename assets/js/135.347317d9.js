(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{1087:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_1-深入理解-javascript-事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-深入理解-javascript-事件"}},[t._v("#")]),t._v(" 1. 深入理解 Javascript 事件")]),t._v(" "),s("h2",{attrs:{id:"事件调度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件调度"}},[t._v("#")]),t._v(" 事件调度")]),t._v(" "),s("h3",{attrs:{id:"线程的阻塞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线程的阻塞"}},[t._v("#")]),t._v(" 线程的阻塞")]),t._v(" "),s("p",[t._v("首先查看下面这段代码")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" end "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("time 经过了：+ ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("end "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("ms")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("结果不是输出 "),s("code",[t._v("time 经过了：500 ms")]),t._v(" 而且 "),s("code",[t._v("time 经过了 2000ms")])]),t._v(" "),s("p",[t._v("❓如果 setTimeout 没有使用另外一个线程，那么它在做什么呢？")]),t._v(" "),s("h3",{attrs:{id:"事件队列"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件队列"}},[t._v("#")]),t._v(" 事件队列")]),t._v(" "),s("h2",{attrs:{id:"异步函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步函数"}},[t._v("#")]),t._v(" 异步函数")]),t._v(" "),s("p",[t._v("每一种 JavaScript 环境都有自己的异步函数集，主要包括两种：")]),t._v(" "),s("ol",[s("li",[t._v("I/O 函数")]),t._v(" "),s("li",[t._v("计时函数")])]),t._v(" "),s("h3",{attrs:{id:"i-o-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-o-函数"}},[t._v("#")]),t._v(" I/O 函数")]),t._v(" "),s("h3",{attrs:{id:"计时函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#计时函数"}},[t._v("#")]),t._v(" 计时函数")]),t._v(" "),s("p",[t._v("计时函数主要包括： "),s("code",[t._v("setTimeout")]),t._v(" 和 "),s("code",[t._v("setInterval")]),t._v(" 函数。但是它们的最高频率是 4ms，大概为 200 次/s。如果需要更小力度的计时应该怎么办呢？")]),t._v(" "),s("p",[t._v("有些运行环境提供的备选方案：")]),t._v(" "),s("ul",[s("li",[t._v("Node 中，process.nextTick 允许将事件调度尽快触发，触发频率可以高达 10 万次/s")]),t._v(" "),s("li",[t._v("一些现代浏览器带有 requestAnimationFrame 函数。此函数有两个目标：\n"),s("ul",[s("li",[t._v("允许以 60 帧 /s 运行动画")]),t._v(" "),s("li",[t._v("避免后台选项卡运行这些动画，从而节约 cpu 周期")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);