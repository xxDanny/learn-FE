(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1055:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"实现-new-操作符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现-new-操作符"}},[t._v("#")]),t._v(" 实现 new 操作符")]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("函数 fn 才有 prototype，对象 obj 是 "),s("code",[t._v("__proto__")]),t._v(" 。")]),t._v(" "),s("p",[t._v("如何使 obj 继承于 fn？")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("上面语句有性能问题可以优化为")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构造函数"}},[t._v("#")]),t._v(" 构造函数")]),t._v(" "),s("p",[t._v("构造函数在技术上是常规函数。不过有两个约定：")]),t._v(" "),s("ul",[s("li",[t._v("它们的命名以大写字母开头。")]),t._v(" "),s("li",[t._v('它们只能由 "new" 操作符来执行。')])]),t._v(" "),s("p",[t._v("当一个函数被使用 "),s("code",[t._v("new")]),t._v(" 操作符执行时，它按照以下步骤：")]),t._v(" "),s("ol",[s("li",[t._v("创建一个空的简单 JavaScript 对象（即**{}**）；")]),t._v(" "),s("li",[t._v("链接该对象（即设置该对象的构造函数）到另一个对象 ；")]),t._v(" "),s("li",[t._v("将步骤 1 新创建的对象作为 "),s("strong",[t._v("this")]),t._v(" 的上下文 ；")]),t._v(" "),s("li",[t._v("如果该函数没有返回对象，则返回** this**。\n以上引用自 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("new 操作符 - MDN"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("换句话说， "),s("code",[t._v("new User(...)")]),t._v(" 做的就是类似的事情：")]),t._v(" "),s("p",[t._v("可能第 2、4 步大家看的不是很明白，这里我重新总结一下这 4 个步骤：")]),t._v(" "),s("ol",[s("li",[t._v("创建一个空对象 u = {}")]),t._v(" "),s("li",[t._v("绑定原型，"),s("code",[t._v("u.__proto__ = User.prototype")])]),t._v(" "),s("li",[t._v("调用 "),s("code",[t._v("User()")]),t._v(" 函数，并把空对象 "),s("code",[t._v("u")]),t._v(" 当做 "),s("code",[t._v("this")]),t._v(" 传入，即 "),s("code",[t._v("User.call(u)")])]),t._v(" "),s("li",[t._v("如果 "),s("code",[t._v("User()")]),t._v(" 函数执行完自己 "),s("code",[t._v("return")]),t._v(" 一个 "),s("code",[t._v("object")]),t._v(" 类型，那么返回此变量，否则返回 "),s("code",[t._v("this")])])]),t._v(" "),s("blockquote",[s("p",[t._v("注意：如果构造函数返回基本类型值，则不影响，还是返回 this")])]),t._v(" "),s("p",[t._v("这是构造器的主要目的 —— 实现可重用的对象创建代码。")]),t._v(" "),s("blockquote",[s("p",[t._v("❗️让我们再强调一遍 —— 从技术上讲，任何函数（除了箭头函数，它没有自己的 "),s("code",[t._v("this")]),t._v(" ）都可以用作构造器。即可以通过 "),s("code",[t._v("new")]),t._v(" 来运行，它会执行上面的算法。“首字母大写”是一个共同的约定，以明确表示一个函数将被使用 "),s("code",[t._v("new")]),t._v(" 来运行。")])]),t._v(" "),s("h2",{attrs:{id:"构造器的-return"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构造器的-return"}},[t._v("#")]),t._v(" 构造器的 return")]),t._v(" "),s("p",[t._v("通常，构造器没有 "),s("code",[t._v("return")]),t._v(" 语句。它们的任务是将所有必要的东西写入 "),s("code",[t._v("this")]),t._v(" ，并自动转换为结果。")]),t._v(" "),s("p",[t._v("但是，如果这有一个 "),s("code",[t._v("return")]),t._v(" 语句，那么规则就简单了：")]),t._v(" "),s("ul",[s("li",[t._v("如果 "),s("code",[t._v("return")]),t._v(" 返回的是一个对象，则返回这个对象，而不是 "),s("code",[t._v("this")]),t._v("。")]),t._v(" "),s("li",[t._v("如果 "),s("code",[t._v("return")]),t._v(" 返回的是一个原始类型，则忽略。\n换句话说，带有对象的 "),s("code",[t._v("return")]),t._v(" 返回该对象，在所有其他情况下返回 "),s("code",[t._v("this")]),t._v(" 。")])]),t._v(" "),s("p",[t._v("例如，这里 "),s("code",[t._v("return")]),t._v(" 通过返回一个对象覆盖 "),s("code",[t._v("this")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("BigUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"John"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Godzilla"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- 返回这个对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BigUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Godzilla，得到了那个对象")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("这里有一个 "),s("code",[t._v("return")]),t._v(" 为空的例子（或者我们可以在它之后放置一个原始类型，没有什么影响）：")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("SmallUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"John"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// <-- 返回 this")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmallUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// John")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h2",{attrs:{id:"练习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#练习"}},[t._v("#")]),t._v(" 练习")]),t._v(" "),s("p",[t._v("自己实现一个 "),s("code",[t._v("new")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("FakeNew")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将类数组 arguments 转为数组，同时将第一个参数也就是构造函数 shift 出来")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" Constructor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 绑定原型")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//obj.__proto__ = Constructor.prototype; ")]),t._v("\n  Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrototypeOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用构造函数，将 obj 当做 this 传入")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getName")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("FakeNew")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'leo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//console.log(u.getName());")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])]),s("h2",{attrs:{id:"prototype-和-proto"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prototype-和-proto"}},[t._v("#")]),t._v(" prototype 和 "),s("strong",[t._v("proto")])]),t._v(" "),s("h3",{attrs:{id:"proto"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proto"}},[t._v("#")]),t._v(" "),s("strong",[t._v("proto")])]),t._v(" "),s("p",[s("code",[t._v("_proto__")]),t._v(" 属性是 "),s("code",[t._v("Object.prototype")]),t._v(" 一个简单的访问器属性，其中包含了 "),s("code",[t._v("get")]),t._v(" （获取）和 "),s("code",[t._v("set")]),t._v(" （设置）的方法，任何一个 "),s("code",[t._v("__proto__")]),t._v(" 的存取属性都继承于 "),s("code",[t._v("Object.prototype")])]),t._v(" "),s("p",[s("code",[t._v("__proto__")]),t._v(" 的读取器 (getter) 暴露了一个对象的内部 "),s("code",[t._v("[[Prototype]]")]),t._v(" 。")]),t._v(" "),s("ul",[s("li",[t._v("对于使用"),s("strong",[t._v("对象字面量")]),t._v("创建的对象，这个值是 "),s("code",[t._v("Object.prototype")]),t._v(" (en-US)。")]),t._v(" "),s("li",[t._v("对于使用"),s("strong",[t._v("数组字面量")]),t._v("创建的对象，这个值是 "),s("code",[t._v("Array.prototype")])]),t._v(" "),s("li",[t._v("对于 "),s("code",[t._v("functions")]),t._v("，这个值是 "),s("code",[t._v("Function.prototype")]),t._v(" (en-US)")]),t._v(" "),s("li",[t._v("对于使用 "),s("strong",[t._v("new fun")]),t._v(" 创建的对象，其中 fun 是由 js 提供的内建构造器函数之一 (Array, Boolean, Date, Number, Object, String 等等），这个值总是 "),s("code",[t._v("fun.prototype")])]),t._v(" "),s("li",[t._v("对于用 JS 定义的其他 JS 构造器函数创建的对象，这个值就是该构造器函数的 "),s("code",[t._v("prototype")]),t._v(" 属性。")])]),t._v(" "),s("blockquote",[s("p",[t._v("引用《JavaScript 权威指南》的一段描述")]),t._v(" "),s("blockquote",[s("p",[t._v("Every JavaScript object has a second JavaScript object (or null , but this is rare) associated with it. This second object is known as a prototype, and the first object inherits properties from the prototype.")])])]),t._v(" "),s("p",[t._v("翻译出来就是每个 JS 对象一定对应一个原型对象，并从原型对象继承属性和方法。好啦，既然有这么一个原型对象，那么对象怎么和它对应的？\n对象 "),s("code",[t._v("__proto__")]),t._v(" 属性的值就是它所对应的原型对象：")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" one "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("x")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" two "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true 对象字面量创建")]),t._v("\ntwo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" one"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toString "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true one 对象从 Object 原型对象继承过来")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("上面的代码应该已经足够解释清楚 "),s("code",[t._v("__proto__")]),t._v(" 了😁。好吧，显然还不够，或者说带来了新的问题： "),s("code",[t._v("Object.prototype")]),t._v(" 是什么？凭什么说 "),s("code",[t._v("one")]),t._v(" 和 "),s("code",[t._v("two")]),t._v(" 的原型就是 "),s("code",[t._v("Object.prototype")]),t._v(" ？")]),t._v(" "),s("h3",{attrs:{id:"prototype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prototype"}},[t._v("#")]),t._v(" prototype")]),t._v(" "),s("p",[t._v("首先来说说 "),s("code",[t._v("prototype")]),t._v(" 属性，不像每个对象都有 "),s("code",[t._v("__proto__")]),t._v(" 属性来标识自己所继承的原型，只有函数才有 "),s("code",[t._v("prototype")]),t._v(" 属性")]),t._v(" "),s("p",[t._v("为什么只有函数才有 "),s("code",[t._v("prototype")]),t._v(" 属性？ "),s("code",[t._v("ES")]),t._v(" 规范就这么定的\n开玩笑了，其实函数在 "),s("code",[t._v("JS")]),t._v(" 中真的很特殊，是所谓的_一等公民_。 "),s("code",[t._v("JS")]),t._v(" 不像其它面向对象的语言，它没有类（ "),s("code",[t._v("class")]),t._v(" ， "),s("code",[t._v("ES6")]),t._v(" 引进了这个关键字，但更多是语法糖）的概念。 "),s("code",[t._v("JS")]),t._v(" 通过函数来模拟类。")]),t._v(" "),s("p",[t._v("当你创建函数时， "),s("code",[t._v("JS")]),t._v(" 会为这个函数自动添加 "),s("code",[t._v("prototype")]),t._v(" 属性，值是空对象 值是一个有 "),s("code",[t._v("constructor")]),t._v(" 属性的对象，不是空对象。而一旦你把这个函数当作构造函数（constructor）调用（即通过 "),s("code",[t._v("new")]),t._v(" 关键字调用），那么 "),s("code",[t._v("JS")]),t._v(" 就会帮你创建该构造函数的实例，实例继承构造函数 "),s("code",[t._v("prototype")]),t._v(" 的所有属性和方法（实例通过设置自己的 "),s("code",[t._v("__proto__")]),t._v(" 指向承构造函数的 "),s("code",[t._v("prototype")]),t._v(" 来实现这种继承）。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:a(485),alt:""}})]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fn_eg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_eg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_eg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("img",{attrs:{src:a(486),alt:""}})]),t._v(" "),s("p",[t._v("JavaScript 是一种基于原型的语言 (prototype-based language)，这个和 Java 等基于类的语言不一样。")]),t._v(" "),s("p",[t._v("每个对象拥有一个原型对象，对象以其原型为模板，从原型继承方法和属性，这些属性和方法定义在对象的构造器函数的 prototype 属性上，而非对象实例本身。\n"),s("img",{attrs:{src:a(487),alt:""}})]),t._v(" "),s("p",[t._v("从上面这张图可以发现， "),s("code",[t._v("Parent")]),t._v(" 对象有一个原型对象 "),s("code",[t._v("Parent.prototype")]),t._v(" ，其上有两个属性，分别是 "),s("code",[t._v("constructor")]),t._v(" 和 "),s("code",[t._v("__proto__")]),t._v(" ，其中 "),s("code",[t._v("__proto__")]),t._v(" 已被弃用。")]),t._v(" "),s("p",[t._v("构造函数 "),s("code",[t._v("Parent")]),t._v(" 有一个指向原型的指针，原型 "),s("code",[t._v("Parent.prototype")]),t._v(" 有一个指向构造函数的指针 "),s("code",[t._v("Parent.prototype.constructor")]),t._v(" ，如上图所示，其实就是一个循环引用。\n"),s("img",{attrs:{src:a(488),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"proto-和-prototype-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proto-和-prototype-区别"}},[t._v("#")]),t._v(" "),s("strong",[t._v("proto")]),t._v(" 和 prototype 区别")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[s("img",{attrs:{src:a(489),alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("这里用 "),s("code",[t._v("p.__proto__")]),t._v(" 获取对象的原型， "),s("code",[t._v("__proto__")]),t._v(" 是每个实例上都有的属性， "),s("code",[t._v("prototype")]),t._v(" 是构造函数的属性，这两个并不一样，但 "),s("code",[t._v("p.__proto__")]),t._v(" 和 "),s("code",[t._v("Parent.prototype")]),t._v(" 指向同一个对象。")])]),t._v(" "),s("p",[t._v("所以构造函数 "),s("code",[t._v("Parent")]),t._v(" 、 "),s("code",[t._v("Parent.prototype")]),t._v(" 和 "),s("code",[t._v("p")]),t._v(" 的关系如下图。\n"),s("img",{attrs:{src:a(490),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("虽然对不熟悉的人来说还有点绕，但 JS 正是通过 "),s("code",[t._v("__proto__")]),t._v(" 和 "),s("code",[t._v("prototype")]),t._v(" 的合作实现了原型链，以及对象的继承。\n构造函数，通过 "),s("code",[t._v("prototype")]),t._v(" 来存储要共享的属性和方法，也可以设置 "),s("code",[t._v("prototype")]),t._v(" 指向现存的对象来继承该对象。")]),t._v(" "),s("p",[t._v("对象的 "),s("code",[t._v("__proto__")]),t._v(" 指向自己构造函数的 "),s("code",[t._v("prototype")])]),t._v(" "),s("p",[s("code",[t._v("obj.__proto__.__proto__...")]),t._v(" 的原型链由此产生，包括我们的操作符 "),s("code",[t._v("instanceof")]),t._v(" 正是通过探测 "),s("code",[t._v("obj.__proto__.__proto__")]),t._v(" ... === "),s("code",[t._v("Constructor.prototype")]),t._v(" 来验证 "),s("code",[t._v("obj")]),t._v(" 是否是 "),s("code",[t._v("Constructor")]),t._v(" 的实例。")]),t._v(" "),s("p",[t._v("回到开头的代码， "),s("code",[t._v("two = new Object()")]),t._v(" 中 "),s("code",[t._v("Object")]),t._v(" 是构造函数，所以 "),s("code",[t._v("two.__proto__")]),t._v(" 就是 "),s("code",[t._v("Object.prototype")]),t._v(" 。至于 "),s("code",[t._v("one")]),t._v(" ，ES 规范定义对象字面量的原型就是 "),s("code",[t._v("Object.prototype")]),t._v(" 。")]),t._v(" "),s("h3",{attrs:{id:"更深一步的探讨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更深一步的探讨"}},[t._v("#")]),t._v(" 更深一步的探讨")]),t._v(" "),s("p",[t._v("我们知道 JS 是单继承的， "),s("code",[t._v("Object.prototype")]),t._v(" 是原型链的顶端，所有对象从它继承了包括 "),s("code",[t._v("toString")]),t._v(" 等等方法和属性")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Object")]),t._v(" 本身是构造函数，继承了 "),s("code",[t._v("Function.prototype")]),t._v(";")]),t._v(" "),s("li",[s("code",[t._v("Function")]),t._v(" 也是对象，继承了 "),s("code",[t._v("Object.prototype")]),t._v("。")])]),t._v(" "),s("p",[t._v("这里就有一个_鸡和蛋_的问题：")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Object "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nFunction "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h2",{attrs:{id:"proto-使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#proto-使用"}},[t._v("#")]),t._v(" "),s("strong",[t._v("proto")]),t._v(" 使用")]),t._v(" "),s("p",[s("strong",[t._v("警告：")]),t._v(" 通过现代浏览器的操作属性的便利性，可以改变一个对象的 "),s("code",[t._v("[[Prototype]]")]),t._v(" 属性，这种行为在每一个 "),s("code",[t._v("JavaScript")]),t._v(" 引擎和浏览器中都是一个非常慢且影响性能的操作，使用这种方式来改变和继承属性是对性能影响非常严重的，并且性能消耗的时间也不是简单的花费在 "),s("code",[t._v("obj.__proto__ = ...")]),t._v(" 语句上")]),t._v(" "),s("p",[t._v("它还会影响到所有继承来自该 "),s("code",[t._v("[[Prototype]]")]),t._v(" 的对象")]),t._v(" "),s("ul",[s("li",[t._v("如果你关心性能，你就不应该在一个对象中修改它的 [[Prototype]]。")]),t._v(" "),s("li",[t._v("相反，创建一个新的且可以继承 "),s("code",[t._v("[[Prototype]]")]),t._v(" 的对象，推荐使用 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Object.create()"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"object-create"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-create"}},[t._v("#")]),t._v(" Object.create()")]),t._v(" "),s("p",[s("code",[t._v("Object.create()")]),t._v(" 方法用于创建一个新对象，使用现有的对象来作为新创建对象的原型 "),s("code",[t._v("（prototype）")]),t._v(" 。")]),t._v(" "),s("p",[s("strong",[t._v("语法")])]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" propertiesObject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("strong",[t._v("参数")])]),t._v(" "),s("ul",[s("li",[t._v("proto: 新创建对象的原型对象。")]),t._v(" "),s("li",[t._v("propertiesObject: 如果该参数被指定且不为 "),s("code",[t._v("undefined")]),t._v("，则该传入对象的自有可枚举属性（即其自身定义的属性，而不是其原型链上的枚举属性）将为新创建的对象添加指定的属性值和对应的属性描述符。这些属性对应于 "),s("code",[t._v("Object.defineProperties()")]),t._v(" 的第二个参数。")])]),t._v(" "),s("p",[s("strong",[t._v("返回值")])]),t._v(" "),s("p",[t._v("一个新对象，带着指定的原型对象及其属性。")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" person "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("isHuman")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("printIntroduction")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("My name is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(". Am I human? ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isHuman"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" son "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("son"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__proto__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//true")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zh.javascript.info/constructor-new",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v('构造器和操作符 "new"'),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/creeperyang/blog/issues/9",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("从__proto__和 prototype 来深入理解 JS 对象和原型链"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Object - MDN"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/proto",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Object.prototype."),s("strong",[t._v("proto")]),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://muyiy.cn/blog/5/5.1.html#%E5%BC%95%E8%A8%80",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("重新认识构造函数、原型和原型链"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports},485:function(t,s,a){t.exports=a.p+"assets/img/js2_1.b968456c.png"},486:function(t,s,a){t.exports=a.p+"assets/img/js2_2.3b0d09c9.png"},487:function(t,s,a){t.exports=a.p+"assets/img/js2_6.2a01b10c.png"},488:function(t,s,a){t.exports=a.p+"assets/img/js2_7.4fbcc4e9.png"},489:function(t,s,a){t.exports=a.p+"assets/img/js2_3.f86686ae.png"},490:function(t,s,a){t.exports=a.p+"assets/img/js2_4.19872d4b.png"}}]);